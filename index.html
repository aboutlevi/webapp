<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stream · Direct</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { width: 100%; height: 100%; overflow: hidden; background: #000; }
        iframe { width: 100%; height: 100%; border: none; }
        .loading {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: #000;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: system-ui;
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <div>Chargement du stream...</div>
    </div>
    
    <iframe 
        id="streamIframe"
        allowfullscreen
        allow="autoplay; encrypted-media; fullscreen; picture-in-picture"
        style="display: none;">
    </iframe>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        
        // Récupérer l'URL depuis les paramètres
        const urlParams = new URLSearchParams(window.location.search);
        const streamUrl = urlParams.get('url');
        
        if (streamUrl) {
            const iframe = document.getElementById('streamIframe');
            iframe.src = streamUrl;
            iframe.style.display = 'block';
            document.getElementById('loading').style.display = 'none';
        } else {
            document.querySelector('.loading').innerHTML = '❌ URL manquante';
        }
        
        // Plein écran automatique
        document.body.addEventListener('click', () => {
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            }
        });
    </script>
</body>
</html>
